<?xml version="1.0" encoding="UTF-8"?>
<lifecycleMappingMetadata>

    <!-- Used in M2E by Eclipse companion plugin, not Maven maven plugin. -->
    <pluginExecutions>

        <!--
            Ensure one-to-one mapping: Maven vs Eclipse.
            1) Maven plugin installs only it's own Eclipse plugin.
            2) Eclipse plugin interacts only with it's own Maven plugin.
        -->
        <pluginExecution>
            <pluginExecutionFilter>

                <!-- Use unique Maven plugin version. -->
                <groupId>com.carrotgarden.maven</groupId>
                <artifactId>scalor-maven-plugin_${version.scala.epoch}</artifactId>
                <versionRange>[${project.version}]</versionRange>
                <goals>

                    <!-- Eclipse companion handles all goals but "eclipse-config". -->

                    <goal>clean-macro</goal>
                    <goal>clean-main</goal>
                    <goal>clean-test</goal>

                    <goal>register-macro</goal>
                    <goal>register-main</goal>
                    <goal>register-test</goal>

                    <goal>compile-macro</goal>
                    <goal>prepack-macro</goal>

                    <goal>compile-main</goal>
                    <goal>prepack-main</goal>

                    <goal>compile-test</goal>
                    <goal>prepack-test</goal>

                    <goal>link-scala-js-main</goal>
                    <goal>prepack-linker-main</goal>

                    <goal>link-scala-js-test</goal>
                    <goal>prepack-linker-test</goal>

                </goals>
            </pluginExecutionFilter>
            <action>

                <!-- Use M2E configurator with unique Maven plugin derived version. -->
                <configurator>
                    <id>${eclipse.plugin.projectConfigurator}</id>
                </configurator>

            </action>
        </pluginExecution>

    </pluginExecutions>

</lifecycleMappingMetadata>
